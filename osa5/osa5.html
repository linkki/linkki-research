<!DOCTYPE html>
<html lang="fi">
<head>
	<meta charset="utf-8">
	<title>Jäsäkurssi - Osa 3</title>
	<link href="../pohja/pohja.css" rel="stylesheet" type="text/css">
		
	<script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.4.6/ace.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.4.6/ext-language_tools.js"></script>
	<script src="../pohja/pohja.js"></script>
</head>
<body>

	<div class="header">
	<nav>
		Jäsää lapsille
		· <a href="../osa1/osa1.html">Osa 1</a>
		· <a href="../osa2/osa2.html">Osa 2</a>
		· <a href="../osa3/osa3.html">Osa 3</a>
		· <a href="../osa4/osa4.html">Osa 4</a>
		· <a href="../osa5/osa5.html">Osa 5</a>
		· <a href="../projektit/projektit.html">Projektit</a>
	</nav>
	</div>
	<div class="content">
<h1>Osa 5 - Funktiot</h1>

<p>
<b>Funktio</b> eli aliohjelma ohjelmoijien käyttämä sana kasalle koodia, joka voidaan suorittaa aina tarvittaessa.
Funktion koodia ei siis suoriteta heti, vaan vasta joskus myöhemmin.
Olemme jo nähneet funktioita osassa 3, jossa loimme tapahtumakäsittelijöitä.
Ne ovat eräs esimerkki funktiosta.

<p>
Funktioita käytetään JavaScriptissä monilla eri tavoilla ja ne voivat näyttää erilaisilta.
Yleisesti ottaen funktiot voi jakaa kahteen luokkaan: <b>nuolifunktoihin</b>, jotka tunnistaa nuolesta <code>=&gt;</code>, ja
<b>avainsanafunktioihin</b>, jotka tunnistaa avainsanasta <code>function</code>.

<p>
Alla on esimerkkejä erilaisista funktiosta, joihin tutustumme tässä luvussa.

<script>codeExample(
`// Tapahtumakäsittelijä:

teksti.onclick = () => {
    alert("Hei siellä!")
}

// Ajastin:

setTimeout(() => {
    alert("Yllätys!")
}, 5000)

// Toistettu funktio:

setInterval(() => {
    alert("Hei taas!")
}, 5000)

// Nimetty funktio:

function liikutaYlös() {
    hahmo.y -= 1
}

// Piirtofunktio:

function piirrä() {
    piirtäjä.clearRect(0, 0, 300, 150)    
    piirtäjä.fillRect(hahmo.x, hahmo.y, 10, 10)

    requestAnimationFrame(piirrä)
}
requestAnimationFrame(piirrä)
`,"javascript");</script>

<div class="codebox question">
	<h3>Kysymys 5.1</h3>
	<p>
		Mitkä yllä olevista funktioista ovat nuolifunktiota ja mitkä avainsanafunktioita?
	</p>
</div>

<h2>Tapahtumäkäsittelijät – kertaus</h2>

<p>
Tutustuimme tapahtumakäsittelijöihin jo luvussa 3.
Ne ovat funktioita, jotka suoritetaan kun jotain tiettyä tapahtuu.
Esimerkiksi napin painaminen ja hiiren liikuttaminen ovat tapahtumia.

<div class="codebox example">
	<h3>Esimerkki 5.2</h3>
	<p>
	Tapahtumakäsittelijä näyttää ilmoituksen, kun tekstiä klikataan.
	<script>
		addEditor(
`<!doctype HTML>
<p id = teksti>Klikkaa tästä!</p>
<script>
	teksti.onclick = e => {
		alert("Hei siellä!")
	}
${closeScript}`
		);
	</script>
</div>

<h2>Ajastimet ja toistetut funktiot</h2>

<p>
Seuraava funktiotyyppi johon tutustumme on <b>ajastetut funktiot</b>.
Ajastettu funktio suoritetaan, kun tietty määrä aikaa on kulunut.
JavaScriptissä ajastetun funktion luomiseen käytetään <code>setTimeout</code>-komentoa.

<p>
<code>setTimeout</code>-komento näyttää seuraavanlaiselta:

<script>codeExample(
`setTimeout(() => {
    
}, 5000)
`,"javascript");</script>

<p>
Aika, jonka kuluttua funktio suoritetaan, on aivan komennon lopussa.
Aika ilmoitetaan <b>millisekunteina</b> eli sekunnin tuhannesosina.
1 000 millisekuntia on yksi sekunti, 5 000 on viisi sekuntia ja niin edelleen.
Yksi minuutti on 60 000 millisekuntia.

<div class="codebox example">
	<h3>Esimerkki 5.3</h3>
	<p>
	Ajastettu funktio, joka suoritetaan 5 sekunnin kuluttua.
	<script>
		addEditor(
`<!doctype HTML>
<script>
	setTimeout(() => {
		alert("Yllätys!")
	}, 5000)
${closeScript}`
		);
	</script>
</div>

<p>
Ajastetun funktion voi laittaa tapahtumakäsittelijän sisälle, jolloin se suoritetaan tietyn ajan kuluttua tapahtumasta:

<div class="codebox example">
	<h3>Esimerkki 5.3</h3>
	<p>
	Ajastettu funktio tapahtumakäsittelijän sisällä. Mitä tapahtuu, jos klikkaat tekstiä uudestaan ennen viestin ilmestymistä?
	<script>
		addEditor(
`<!doctype HTML>
<p id = teksti>Klikkaa tästä!</p>
<script>
	teksti.onclick = e => {
		setTimeout(() => {
			alert("Hei taas!")
		}, 5000)
	}
${closeScript}`
		);
	</script>
</div>

<h2>Nimetyt funktiot</h2>

<h2>Piirtosilmukka ja päivityssilmukka</h2>

</div>
</body>
</html>
